{% extends 'bedesk/base.html' %}

{% block title %}Gerenciar Reservas{% endblock %}

{% block content %}
<div class="container mt-4">

    <h2 class="mb-4">Reservas Pendentes de Aprovação</h2>

    {% if reservas_pendentes %}
    <div class="table-responsive shadow-sm rounded">
        <table class="table table-hover align-middle">
            <thead class="table-dark">
                <tr>
                    <th>ID</th>
                    <th>Usuário</th>
                    <th>Sala</th>
                    <th>Início</th>
                    <th>Status</th>
                    <th class="text-center">Ação</th>
                </tr>
            </thead>
            <tbody>
                {% for reserva in reservas_pendentes %}
                <tr>
                    <td>{{ reserva.id }}</td>
                    <td>{{ reserva.usuario.username }}</td>
                    <td>{{ reserva.sala.nome }}</td>
                    <td>{{ reserva.data_inicio|date:"d/m/Y H:i" }}</td>
                    <td><span class="badge bg-warning text-dark">{{ reserva.status }}</span></td>
                    <td class="text-center">
                        <a href="{% url 'aprovar_reserva' reserva.id %}" class="btn btn-success btn-sm">Aprovar</a>
                        
                        <a href="{% url 'rejeitar_reserva' reserva.id %}" class="btn btn-danger btn-sm">Rejeitar</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="alert alert-info" role="alert">
        Nenhuma reserva pendente no momento.
    </div>
    {% endif %}

    <hr class="my-5">

    <h2 class="mb-4">Reservas Aprovadas (Agendadas)</h2>

    {% if reservas_aprovadas %}
    <div class="table-responsive shadow-sm rounded">
        <table class="table table-hover align-middle">
            <thead class="table-dark">
                <tr>
                    <th>ID</th>
                    <th>Usuário</th>
                    <th>Sala</th>
                    <th>Início</th>
                    <th>Status</th>
                    <th class="text-center">Ação</th>
                </tr>
            </thead>
            <tbody>
                {% for reserva in reservas_aprovadas %}
                <tr>
                    <td>{{ reserva.id }}</td>
                    <td>{{ reserva.usuario.username }}</td>
                    <td>{{ reserva.sala.nome }}</td>
                    <td>{{ reserva.data_inicio|date:"d/m/Y H:i" }}</td>
                    <td><span class="badge bg-success">{{ reserva.status }}</span></td>
                    <td class="text-center">
                        <a href="{% url 'rejeitar_reserva' reserva.id %}" class="btn btn-warning btn-sm">
                            Cancelar Reserva
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="alert alert-info" role="alert">
        Nenhuma reserva aprovada para os próximos dias.
    </div>
    {% endif %}

</div>
{% endblock %}